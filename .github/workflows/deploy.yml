# name: Build & Push Docker Images

# on:
#   push:
#     branches:
#       - main

# env:
#   REGISTRY: docker.io
#   CLIENT_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/deploy-terraform-cd-client
#   SERVER_IMAGE: ${{ secrets.DOCKERHUB_USERNAME }}/deploy-terraform-cd-server

# jobs:
#   docker:
#     name: 🐳 Build & Push Docker Images
#     runs-on: ubuntu-latest

#     steps:
#       - name: ⬇️ Checkout repository
#         uses: actions/checkout@v4

#       - name: 🔑 Login to DockerHub
#         uses: docker/login-action@v3
#         with:
#           username: ${{ secrets.DOCKERHUB_USERNAME }}
#           password: ${{ secrets.DOCKERHUB_TOKEN }}

#       - name: 🏷️ Set image version
#         id: version
#         run: echo "version=v1.0.${{ github.run_number }}" >> $GITHUB_OUTPUT

#       - name: 🏗️ Build & Push Client image
#         uses: docker/build-push-action@v5
#         with:
#           context: ./client
#           file: ./client/Dockerfile
#           push: true
#           tags: |
#             ${{ env.CLIENT_IMAGE }}:latest
#             ${{ env.CLIENT_IMAGE }}:${{ steps.version.outputs.version }}

#       - name: 🏗️ Build & Push Server image
#         uses: docker/build-push-action@v5
#         with:
#           context: ./server
#           file: ./server/Dockerfile
#           push: true
#           tags: |
#             ${{ env.SERVER_IMAGE }}:latest
#             ${{ env.SERVER_IMAGE }}:${{ steps.version.outputs.version }}

#       - name: ✅ Confirm pushed images
#         run: |
#           echo "✅ Client image: ${{ env.CLIENT_IMAGE }}:${{ steps.version.outputs.version }}"
#           echo "✅ Server image: ${{ env.SERVER_IMAGE }}:${{ steps.version.outputs.version }}"
